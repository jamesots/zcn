;ruler - draws a (cm) ruler on NC screen, accurate to ~1mm.

org 0100h

ld a,(066h)
cp 0f7h
ret nz		;must be ZCN

ld de,mfixscrn	;sort out screen and cursor
ld c,9
call 5

ld hl,bitmap
ld de,0f000h
ld a,10
loop:
ld bc,60
ldir
inc de
inc de
inc de
inc de
dec a
jr nz,loop

ret


mfixscrn:
defb 1		;cls
defb 16,32+2,32	;move cursor to (0,1)
defb '$'


;480x12 bitmap containing ruler graphic
bitmap:
defb 10000000b,00010000b,00000001b,00000000b,00100000b,00000100b
defb 00000000b,01000000b,00001000b,00000000b,10000000b,00010000b
defb 00000010b,00000000b,00100000b,00000100b,00000000b,10000000b
defb 00001000b,00000001b,00000000b,00010000b,00000010b,00000000b
defb 01000000b,00000100b,00000000b,10000000b,00010000b,00000001b
defb 00000000b,00100000b,00000010b,00000000b,01000000b,00001000b
defb 00000000b,10000000b,00010000b,00000010b,00000000b,00100000b
defb 00000100b,00000000b,01000000b,00001000b,00000001b,00000000b
defb 00010000b,00000010b,00000000b,01000000b,00000100b,00000000b
defb 10000000b,00001000b,00000001b,00000000b,00100000b,00000010b

defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000100b
defb 00000000b,00000000b,00001000b,00000000b,00000000b,00010000b
defb 00000000b,00000000b,00100000b,00000000b,00000000b,10000000b
defb 00000000b,00000001b,00000000b,00000000b,00000010b,00000000b
defb 00000000b,00000100b,00000000b,00000000b,00010000b,00000000b
defb 00000000b,00100000b,00000000b,00000000b,01000000b,00000000b
defb 00000000b,10000000b,00000000b,00000010b,00000000b,00000000b
defb 00000100b,00000000b,00000000b,00001000b,00000000b,00000000b
defb 00010000b,00000000b,00000000b,01000000b,00000000b,00000000b
defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000010b

defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000100b
defb 00000000b,00000000b,00001000b,00000000b,00000000b,00010000b
defb 00000000b,00000000b,00100000b,00000000b,00000000b,10000000b
defb 00000000b,00000001b,00000000b,00000000b,00000010b,00000000b
defb 00000000b,00000100b,00000000b,00000000b,00010000b,00000000b
defb 00000000b,00100000b,00000000b,00000000b,01000000b,00000000b
defb 00000000b,10000000b,00000000b,00000010b,00000000b,00000000b
defb 00000100b,00000000b,00000000b,00001000b,00000000b,00000000b
defb 00010000b,00000000b,00000000b,01000000b,00000000b,00000000b
defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000010b

defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000100b
defb 00000000b,00000000b,00001000b,00000000b,00000000b,00010000b
defb 00000000b,00000000b,00100000b,00000000b,00000000b,10000000b
defb 00000000b,00000001b,00000000b,00000000b,00000010b,00000000b
defb 00000000b,00000100b,00000000b,00000000b,00010000b,00000000b
defb 00000000b,00100000b,00000000b,00000000b,01000000b,00000000b
defb 00000000b,10000000b,00000000b,00000010b,00000000b,00000000b
defb 00000100b,00000000b,00000000b,00001000b,00000000b,00000000b
defb 00010000b,00000000b,00000000b,01000000b,00000000b,00000000b
defb 10000000b,00000000b,00000001b,00000000b,00000000b,00000010b

defs 60

defb 01000000b,00000000b,00000001b,00000000b,00000000b,00001100b
defb 00000000b,00000000b,00011000b,00000000b,00000000b,00100000b
defb 00000000b,00000000b,01110000b,00000000b,00000000b,11000000b
defb 00000000b,00000011b,10000000b,00000000b,00000010b,00000000b
defb 00000000b,00000100b,00000000b,00000000b,01000100b,00000000b
defb 00000000b,10001000b,00000000b,00000001b,00110000b,00000000b
defb 00000010b,01100000b,00000000b,00001001b,00000000b,00000000b
defb 00010011b,10000000b,00000000b,00100011b,00000000b,00000000b
defb 01001110b,00000000b,00000001b,00010000b,00000000b,00000010b
defb 00100000b,00000000b,00001100b,01000000b,00000000b,01100010b

defb 10100000b,00000000b,00000011b,00000000b,00000000b,00000010b
defb 00000000b,00000000b,00000100b,00000000b,00000000b,00110000b
defb 00000000b,00000000b,01000000b,00000000b,00000001b,00000000b
defb 00000000b,00000000b,10000000b,00000000b,00000101b,00000000b
defb 00000000b,00001010b,00000000b,00000000b,11001010b,00000000b
defb 00000001b,10011000b,00000000b,00000011b,00001000b,00000000b
defb 00000110b,00010000b,00000000b,00011001b,10000000b,00000000b
defb 00110010b,00000000b,00000000b,01100100b,00000000b,00000000b
defb 11000010b,00000000b,00000011b,00101000b,00000000b,00000110b
defb 01010000b,00000000b,00000010b,10100000b,00000000b,00010110b

defb 10100000b,00000000b,00000001b,00000000b,00000000b,00000100b
defb 00000000b,00000000b,00001000b,00000000b,00000000b,00111000b
defb 00000000b,00000000b,01100000b,00000000b,00000001b,10000000b
defb 00000000b,00000001b,00000000b,00000000b,00000010b,00000000b
defb 00000000b,00000110b,00000000b,00000000b,01001010b,00000000b
defb 00000000b,10001000b,00000000b,00000001b,00010000b,00000000b
defb 00000010b,00100000b,00000000b,00001001b,11000000b,00000000b
defb 00010011b,00000000b,00000000b,00100110b,00000000b,00000000b
defb 01000100b,00000000b,00000001b,00010000b,00000000b,00000010b
defb 00110000b,00000000b,00000100b,10100000b,00000000b,00100010b

defb 10100000b,00000000b,00000001b,00000000b,00000000b,00001000b
defb 00000000b,00000000b,00000100b,00000000b,00000000b,00010000b
defb 00000000b,00000000b,00010000b,00000000b,00000001b,01000000b
defb 00000000b,00000001b,00000000b,00000000b,00000101b,00000000b
defb 00000000b,00000010b,00000000b,00000000b,01001010b,00000000b
defb 00000000b,10001000b,00000000b,00000001b,00100000b,00000000b
defb 00000010b,00010000b,00000000b,00001000b,10000000b,00000000b
defb 00010000b,10000000b,00000000b,00100101b,00000000b,00000000b
defb 01000100b,00000000b,00000001b,00101000b,00000000b,00000010b
defb 00010000b,00000000b,00001000b,10100000b,00000000b,01000010b

defb 01000000b,00000000b,00000011b,10000000b,00000000b,00001110b
defb 00000000b,00000000b,00011000b,00000000b,00000000b,00010000b
defb 00000000b,00000000b,01100000b,00000000b,00000000b,10000000b
defb 00000000b,00000001b,00000000b,00000000b,00000010b,00000000b
defb 00000000b,00000100b,00000000b,00000000b,11100100b,00000000b
defb 00000001b,11011100b,00000000b,00000011b,10111000b,00000000b
defb 00000111b,01100000b,00000000b,00011100b,10000000b,00000000b
defb 00111011b,00000000b,00000000b,01110010b,00000000b,00000000b
defb 11100100b,00000000b,00000011b,10010000b,00000000b,00000111b
defb 00100000b,00000000b,00001110b,01000000b,00000000b,01110111b
